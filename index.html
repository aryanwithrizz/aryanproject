<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aryan's Market - Shop Everything</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            overflow-x: hidden;
        }

        .screen {
            display: none;
            min-height: 100vh;
            width: 100%;
            position: absolute;
            top: 0;
            left: 0;
        }

        .screen.active {
            display: block;
        }

        /* ============ LOGIN/SIGNUP SCREEN ============ */
        #loginScreen {
            background: linear-gradient(135deg, #000000 50%, #6b46c1 50%);
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        #loginScreen::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            backdrop-filter: blur(10px);
            z-index: 1;
        }

        .login-container {
            position: relative;
            z-index: 2;
            text-align: center;
            color: white;
        }

        .stats {
            display: flex;
            gap: 30px;
            justify-content: center;
            margin-bottom: 40px;
        }

        .stat-box {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            padding: 15px 30px;
            border-radius: 10px;
            border: 2px solid rgba(255,255,255,0.2);
        }

        .stat-box h3 {
            font-size: 28px;
            color: #a78bfa;
        }

        .stat-box p {
            font-size: 14px;
            margin-top: 5px;
        }

        .auth-boxes {
            display: flex;
            gap: 30px;
            margin-top: 40px;
        }

        .auth-box {
            background: rgba(255,255,255,0.15);
            backdrop-filter: blur(20px);
            padding: 40px;
            border-radius: 20px;
            border: 2px solid rgba(255,255,255,0.3);
            min-width: 320px;
        }

        .auth-box h2 {
            font-size: 32px;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #fff, #a78bfa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .input-group {
            margin: 15px 0;
        }

        .input-group input {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 10px;
            background: rgba(255,255,255,0.9);
            font-size: 16px;
        }

        .auth-btn {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 10px;
            background: linear-gradient(135deg, #6b46c1, #a78bfa);
            color: white;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
            transition: transform 0.2s;
        }

        .auth-btn:hover {
            transform: scale(1.05);
        }

        /* ============ WELCOME SCREEN ============ */
        #welcomeScreen {
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .welcome-text {
            color: white;
            text-align: center;
        }

        .welcome-text h1 {
            font-size: 48px;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #fff, #a78bfa);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .welcome-text p {
            font-size: 24px;
            margin-bottom: 40px;
        }

        .ok-btn {
            padding: 20px 60px;
            background: #10b981;
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .ok-btn:hover {
            transform: scale(1.1);
        }

        /* ============ HOME SCREEN ============ */
        #homeScreen {
            background: linear-gradient(to bottom, #1a1a2e, #16213e);
            padding-bottom: 80px;
        }

        .top-bar {
            background: rgba(107, 70, 193, 0.9);
            backdrop-filter: blur(10px);
            padding: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .top-bar h1 {
            color: white;
            font-size: 28px;
        }

        .search-bar {
            flex: 1;
            margin: 0 30px;
        }

        .search-bar input {
            width: 100%;
            padding: 12px 20px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
        }

        .bottom-nav {
            position: fixed;
            bottom: 0;
            width: 100%;
            background: rgba(107, 70, 193, 0.95);
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: space-around;
            padding: 15px 0;
            z-index: 100;
        }

        .nav-btn {
            background: none;
            border: none;
            color: white;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 5px;
            transition: transform 0.2s;
        }

        .nav-btn:hover {
            transform: scale(1.1);
        }

        .nav-icon {
            font-size: 24px;
        }

        .content-area {
            padding: 20px;
        }

        .section-title {
            color: white;
            font-size: 28px;
            margin: 30px 0 20px 0;
        }

        .categories-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .category-card {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s;
            border: 2px solid rgba(167, 139, 250, 0.3);
        }

        .category-card:hover {
            transform: translateY(-10px);
            border-color: #a78bfa;
        }

        .category-img {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .category-card h3 {
            color: white;
            font-size: 20px;
        }

        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
        }

        .product-card {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 15px;
            border: 2px solid rgba(167, 139, 250, 0.3);
            transition: transform 0.3s;
            cursor: pointer;
        }

        .product-card:hover {
            transform: translateY(-5px);
            border-color: #a78bfa;
        }

        .product-img {
            width: 100%;
            height: 200px;
            object-fit: cover;
            border-radius: 10px;
            margin-bottom: 10px;
        }

        .product-info {
            color: white;
        }

        .product-name {
            font-size: 18px;
            margin-bottom: 10px;
        }

        .product-price {
            font-size: 22px;
            color: #10b981;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .product-btns {
            display: flex;
            gap: 10px;
        }

        .add-cart-btn, .buy-btn {
            flex: 1;
            padding: 10px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .add-cart-btn {
            background: #6b46c1;
            color: white;
        }

        .buy-btn {
            background: #10b981;
            color: white;
        }

        .add-cart-btn:hover, .buy-btn:hover {
            transform: scale(1.05);
        }

        /* ============ PRODUCT DETAIL SCREEN ============ */
        #productDetailScreen {
            background: linear-gradient(to bottom, #1a1a2e, #16213e);
            min-height: 100vh;
            padding: 20px;
            padding-bottom: 100px;
        }

        .back-btn {
            background: #6b46c1;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            margin-bottom: 20px;
            font-size: 16px;
        }

        .product-detail-container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            color: white;
        }

        .product-detail-img {
            width: 100%;
            max-height: 400px;
            object-fit: contain;
            border-radius: 15px;
            margin-bottom: 20px;
        }

        /* ============ CART SCREEN ============ */
        #cartScreen {
            background: linear-gradient(to bottom, #1a1a2e, #16213e);
            min-height: 100vh;
            padding: 20px;
            padding-bottom: 100px;
        }

        .cart-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .cart-item {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 15px;
            display: flex;
            gap: 20px;
            color: white;
        }

        .cart-item-img {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 10px;
        }

        .cart-item-info {
            flex: 1;
        }

        .remove-btn {
            background: #ef4444;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
        }

        .cart-total {
            background: rgba(107, 70, 193, 0.3);
            padding: 20px;
            border-radius: 15px;
            color: white;
            font-size: 24px;
            text-align: right;
            margin: 20px 0;
        }

        .checkout-btn {
            width: 100%;
            padding: 20px;
            background: #10b981;
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
        }

        /* ============ PAYMENT SCREEN ============ */
        #paymentScreen {
            background: linear-gradient(to bottom, #1a1a2e, #16213e);
            min-height: 100vh;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .payment-container {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            max-width: 500px;
            width: 100%;
            color: white;
            text-align: center;
        }

        .upi-info {
            background: rgba(107, 70, 193, 0.3);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
        }

        .confirm-payment-btn {
            width: 100%;
            padding: 20px;
            background: #10b981;
            color: white;
            border: none;
            border-radius: 15px;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 20px;
        }

        /* ============ ORDER CONFIRMATION ============ */
        #orderConfirmScreen {
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            color: white;
            text-align: center;
        }

        .success-icon {
            font-size: 100px;
            color: #10b981;
            margin-bottom: 20px;
        }

        /* ============ ADMIN PANEL ============ */
        #adminScreen {
            background: linear-gradient(to bottom, #1a1a2e, #16213e);
            min-height: 100vh;
            padding: 20px;
            color: white;
        }

        .admin-header {
            background: rgba(107, 70, 193, 0.5);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logout-btn {
            background: #ef4444;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
        }

        .admin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .admin-stat-card {
            background: rgba(107, 70, 193, 0.3);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
        }

        .admin-stat-card h2 {
            font-size: 36px;
            color: #10b981;
        }

        .orders-table {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            overflow-x: auto;
        }

        table {
            width: 100%;
            color: white;
            border-collapse: collapse;
        }

        th, td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .block-btn {
            background: #ef4444;
            color: white;
            border: none;
            padding: 5px 15px;
            border-radius: 5px;
            cursor: pointer;
        }

        .empty-message {
            color: white;
            text-align: center;
            font-size: 20px;
            padding: 40px;
        }

        .cart-badge {
            position: absolute;
            top: -8px;
            right: -8px;
            background: #ef4444;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .nav-btn {
            position: relative;
        }

        @media (max-width: 768px) {
            .auth-boxes {
                flex-direction: column;
            }
            
            .stats {
                flex-direction: column;
                gap: 15px;
            }
            
            .top-bar h1 {
                font-size: 20px;
            }
            
            .search-bar {
                margin: 0 10px;
            }
        }
    </style>
</head>
<body>

    <!-- ==================== LOGIN/SIGNUP SCREEN ==================== -->
    <div id="loginScreen" class="screen active">
        <div class="login-container">
            <h1 style="font-size: 48px; margin-bottom: 20px;">Welcome to Aryan's Market</h1>
            <p style="font-size: 20px; margin-bottom: 30px;">Your One-Stop Shop for Everything!</p>
            
            <div class="stats">
                <div class="stat-box">
                    <h3>1M+</h3>
                    <p>Active Users</p>
                </div>
                <div class="stat-box">
                    <h3>100K+</h3>
                    <p>Daily Orders</p>
                </div>
                <div class="stat-box">
                    <h3>50K+</h3>
                    <p>Products</p>
                </div>
            </div>

            <div class="auth-boxes">
                <div class="auth-box">
                    <h2>Login</h2>
                    <div class="input-group">
                        <input type="email" id="loginEmail" placeholder="Email Address">
                    </div>
                    <div class="input-group">
                        <input type="password" id="loginPassword" placeholder="Password">
                    </div>
                    <button class="auth-btn" onclick="handleLogin()">Login</button>
                </div>

                <div class="auth-box">
                    <h2>Sign Up</h2>
                    <div class="input-group">
                        <input type="text" id="signupName" placeholder="Full Name">
                    </div>
                    <div class="input-group">
                        <input type="email" id="signupEmail" placeholder="Email Address">
                    </div>
                    <div class="input-group">
                        <input type="password" id="signupPassword" placeholder="Password">
                    </div>
                    <button class="auth-btn" onclick="handleSignup()">Sign Up</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ==================== WELCOME SCREEN ==================== -->
    <div id="welcomeScreen" class="screen">
        <div class="welcome-text">
            <h1>Welcome <span id="userName"></span>!</h1>
            <p>Let's start our journey together</p>
            <button class="ok-btn" onclick="showHome()">OK</button>
        </div>
    </div>

    <!-- ==================== HOME SCREEN ==================== -->
    <div id="homeScreen" class="screen">
        <div class="top-bar">
            <h1>Aryan's Market</h1>
            <div class="search-bar">
                <input type="text" id="searchInput" placeholder="Search products..." onkeyup="searchProducts()">
            </div>
        </div>

        <div class="content-area">
            <h2 class="section-title">Shop by Category</h2>
            <div class="categories-grid">
                <div class="category-card" onclick="showCategory('Electronics')">
                    <img src="https://images.unsplash.com/photo-1498049794561-7780e7231661?w=400" class="category-img" alt="Electronics">
                    <h3>Electronics</h3>
                </div>
                <div class="category-card" onclick="showCategory('Grocery')">
                    <img src="https://images.unsplash.com/photo-1542838132-92c53300491e?w=400" class="category-img" alt="Grocery">
                    <h3>Grocery</h3>
                </div>
                <div class="category-card" onclick="showCategory('Clothes')">
                    <img src="https://images.unsplash.com/photo-1445205170230-053b83016050?w=400" class="category-img" alt="Clothes">
                    <h3>Clothes</h3>
                </div>
                <div class="category-card" onclick="showCategory('Home')">
                    <img src="https://images.unsplash.com/photo-1484101403633-562f891dc89a?w=400" class="category-img" alt="Home">
                    <h3>Home & Kitchen</h3>
                </div>
            </div>

            <h2 class="section-title" id="productsTitle">Featured Products</h2>
            <div class="products-grid" id="productsGrid"></div>
        </div>

        <div class="bottom-nav">
            <button class="nav-btn" onclick="showHome()">
                <span class="nav-icon">üè†</span>
                Home
            </button>
            <button class="nav-btn" onclick="showCart()">
                <span class="nav-icon">üõí</span>
                Cart
                <span class="cart-badge" id="cartBadge">0</span>
            </button>
            <button class="nav-btn" onclick="showProfile()">
                <span class="nav-icon">üë§</span>
                Profile
            </button>
        </div>
    </div>

    <!-- ==================== PRODUCT DETAIL SCREEN ==================== -->
    <div id="productDetailScreen" class="screen">
        <button class="back-btn" onclick="backToHome()">‚Üê Back</button>
        <div class="product-detail-container" id="productDetailContent"></div>
    </div>

    <!-- ==================== CART SCREEN ==================== -->
    <div id="cartScreen" class="screen">
        <div class="top-bar">
            <h1>Shopping Cart</h1>
        </div>
        <div class="cart-container" id="cartContainer"></div>
        
        <div class="bottom-nav">
            <button class="nav-btn" onclick="showHome()">
                <span class="nav-icon">üè†</span>
                Home
            </button>
            <button class="nav-btn" onclick="showCart()">
                <span class="nav-icon">üõí</span>
                Cart
                <span class="cart-badge" id="cartBadge2">0</span>
            </button>
            <button class="nav-btn" onclick="showProfile()">
                <span class="nav-icon">üë§</span>
                Profile
            </button>
        </div>
    </div>

    <!-- ==================== PAYMENT SCREEN ==================== -->
    <div id="paymentScreen" class="screen">
        <div class="payment-container">
            <h1>Complete Payment</h1>
            <div class="upi-info">
                <h2>Pay to UPI</h2>
                <h3 style="color: #10b981; margin: 15px 0;">aryanwithrizz@ybl</h3>
                <p>Total Amount: ‚Çπ<span id="paymentAmount">0</span></p>
            </div>
            <p>Scan QR or pay via UPI app</p>
            <button class="confirm-payment-btn" onclick="confirmOrder()">I've Paid - Confirm Order</button>
            <button class="back-btn" style="margin-top: 20px;" onclick="showCart()">Cancel</button>
        </div>
    </div>

    <!-- ==================== ORDER CONFIRMATION ==================== -->
    <div id="orderConfirmScreen" class="screen">
        <div class="success-icon">‚úÖ</div>
        <h1 style="font-size: 48px; margin-bottom: 20px;">Order Placed Successfully!</h1>
        <p style="font-size: 20px; margin-bottom: 30px;">Thank you for shopping with us!</p>
        <p style="margin-bottom: 30px;">Order ID: <span id="orderId"></span></p>
        <button class="ok-btn" onclick="showHome()">Continue Shopping</button>
    </div>

    <!-- ==================== ADMIN PANEL ==================== -->
    <div id="adminScreen" class="screen">
        <div class="admin-header">
            <h1>Admin Dashboard</h1>
            <button class="logout-btn" onclick="adminLogout()">Logout</button>
        </div>

        <div class="admin-stats">
            <div class="admin-stat-card">
                <h2 id="totalUsers">0</h2>
                <p>Total Users</p>
            </div>
            <div class="admin-stat-card">
                <h2 id="totalOrders">0</h2>
                <p>Total Orders</p>
            </div>
            <div class="admin-stat-card">
                <h2 id="totalRevenue">0</h2>
                <p>Revenue (‚Çπ)</p>
            </div>
        </div>

        <div class="orders-table">
            <h2 style="margin-bottom: 20px;">Recent Orders</h2>
            <table id="ordersTable">
                <thead>
                    <tr>
                        <th>Order ID</th>
                        <th>User</th>
                        <th>Email</th>
                        <th>Items</th>
                        <th>Total</th>
                        <th>Date</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody id="ordersTableBody"></tbody>
            </table>
        </div>
    </div>

    <script>
        // ==================== DATA STRUCTURES ====================
        const products = [
            // Electronics
            { id: 1, name: "Samsung Galaxy S23", category: "Electronics", price: 54999, img: "https://images.unsplash.com/photo-1610945415295-d9bbf067e59c?w=400", desc: "Latest Samsung flagship with amazing camera" },
            { id: 2, name: "Sony Headphones WH-1000XM5", category: "Electronics", price: 29999, img: "https://images.unsplash.com/photo-1546435770-a3e426bf472b?w=400", desc: "Premium noise cancelling headphones" },
            { id: 3, name: "Dell Laptop Inspiron", category: "Electronics", price: 45999, img: "https://images.unsplash.com/photo-1588872657578-7efd1f1555ed?w=400", desc: "Perfect for work and gaming" },
            { id: 4, name: "Apple iPad Air", category: "Electronics", price: 59999, img: "https://images.unsplash.com/photo-1544244015-0df4b3ffc6b0?w=400", desc: "Powerful tablet for creativity" },
            { id: 5, name: "Canon DSLR Camera", category: "Electronics", price: 42999, img: "https://images.unsplash.com/photo-1516035069371-29a1b244cc32?w=400", desc: "Capture stunning photos" },
            
            // Grocery
            { id: 6, name: "Organic Rice 5kg", category: "Grocery", price: 450, img: "https://images.unsplash.com/photo-1586201375761-83865001e31c?w=400", desc: "Premium quality organic rice" },
            { id: 7, name: "Mixed Dry Fruits 1kg", category: "Grocery", price: 899, img: "https://images.unsplash.com/photo-1607161466485-c2101f8f4aa3?w=400", desc: "Healthy and nutritious" },
            { id: 8, name: "Olive Oil 1L", category: "Grocery", price: 650, img: "https://images.unsplash.com/photo-1474979266404-7eaacbcd87c5?w=400", desc: "Extra virgin olive oil" },
            { id: 9, name: "Tea Variety Pack", category: "Grocery", price: 399, img: "https://images.unsplash.com/photo-1564890369478-c89ca6d9cde9?w=400", desc: "Premium tea collection" },
            { id: 10, name: "Organic Honey 500g", category: "Grocery", price: 350, img: "https://images.unsplash.com/photo-1587049352846-4a222e784acc?w=400", desc: "Pure natural honey" },
            
            // Clothes
            { id: 11, name: "Men's Casual Shirt", category: "Clothes", price: 999, img: "https://images.unsplash.com/photo-1602810318383-e386cc2a3ccf?w=400", desc: "Comfortable cotton shirt" },
            { id: 12, name: "Women's Summer Dress", category: "Clothes", price: 1499, img: "https://images.unsplash.com/photo-1572804013309-59a88b7e92f1?w=400", desc: "Elegant and stylish" },
            { id: 13, name: "Denim Jeans", category: "Clothes", price: 1299, img: "https://images.unsplash.com/photo-1542272604-787c3835535d?w=400", desc: "Classic fit denim" },
            { id: 14, name: "Sports Jacket", category: "Clothes", price: 2499, img: "https://images.unsplash.com/photo-1551028719-00167b16eac5?w=400", desc: "Perfect for outdoor activities" },
            { id: 15, name: "Formal Blazer", category: "Clothes", price: 3499, img: "https://images.unsplash.com/photo-1507679799987-c73779587ccf?w=400", desc: "Professional look" },
            
            // Home & Kitchen
            { id: 16, name: "Air Fryer", category: "Home", price: 4999, img: "https://images.unsplash.com/photo-1585515320310-259814833e62?w=400", desc: "Healthy cooking made easy" },
            { id: 17, name: "Mixer Grinder", category: "Home", price: 3499, img: "https://images.unsplash.com/photo-1570222094114-d054a817e56b?w=400", desc: "Powerful 750W motor" },
            { id: 18, name: "Bedsheet Set", category: "Home", price: 1299, img: "https://images.unsplash.com/photo-1631049307264-da0ec9d70304?w=400", desc: "Premium cotton bedding" },
            { id: 19, name: "Wall Clock", category: "Home", price: 799, img: "https://images.unsplash.com/photo-1563861826100-9cb868fdbe1c?w=400", desc: "Modern design" },
            { id: 20, name: "Table Lamp", category: "Home", price: 1099, img: "https://images.unsplash.com/photo-1507473885765-e6ed057f782c?w=400", desc: "LED desk lamp" },
        ];

        let currentUser = null;
        let cart = [];
        let allProducts = [...products];
        let filteredProducts = [...products];

        // ==================== INITIALIZATION ====================
        function init() {
            loadUserData();
            displayProducts(allProducts);
            updateCartBadge();
        }

        function loadUserData() {
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
            }
            const savedCart = localStorage.getItem('cart');
            if (savedCart) {
                cart = JSON.parse(savedCart);
            }
        }

        function saveUserData() {
            localStorage.setItem('currentUser', JSON.stringify(currentUser));
            localStorage.setItem('cart', JSON.stringify(cart));
        }

        // ==================== SCREEN NAVIGATION ====================
        function showScreen(screenId) {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        // ==================== AUTHENTICATION ====================
        function handleLogin() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            if (!email || !password) {
                alert('Please fill all fields');
                return;
            }

            // Admin Check
            if (email === 'aryanarvindpandit@gmail.com' && password === '@ryan777') {
                showAdminPanel();
                return;
            }

            // Regular user login
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const user = users.find(u => u.email === email && u.password === password);

            if (user) {
                currentUser = user;
                saveUserData();
                showWelcome();
            } else {
                alert('Invalid credentials! Please sign up first.');
            }
        }

        function handleSignup() {
            const name = document.getElementById('signupName').value;
            const email = document.getElementById('signupEmail').value;
            const password = document.getElementById('signupPassword').value;

            if (!name || !email || !password) {
                alert('Please fill all fields');
                return;
            }

            const users = JSON.parse(localStorage.getItem('users') || '[]');
            
            if (users.find(u => u.email === email)) {
                alert('Email already registered! Please login.');
                return;
            }

            const newUser = { name, email, password, createdAt: new Date() };
            users.push(newUser);
            localStorage.setItem('users', JSON.stringify(users));

            currentUser = newUser;
            saveUserData();
            showWelcome();
        }

        function showWelcome() {
            document.getElementById('userName').textContent = currentUser.name;
            showScreen('welcomeScreen');
        }

        function showHome() {
            showScreen('homeScreen');
            displayProducts(allProducts);
            filteredProducts = allProducts;
            document.getElementById('productsTitle').textContent = 'Featured Products';
        }

        // ==================== PRODUCTS DISPLAY ====================
        function displayProducts(productsToShow) {
            const grid = document.getElementById('productsGrid');
            grid.innerHTML = '';

            productsToShow.forEach(product => {
                const card = `
                    <div class="product-card" onclick="showProductDetail(${product.id})">
                        <img src="${product.img}" class="product-img" alt="${product.name}">
                        <div class="product-info">
                            <div class="product-name">${product.name}</div>
                            <div class="product-price">‚Çπ${product.price}</div>
                            <div class="product-btns">
                                <button class="add-cart-btn" onclick="event.stopPropagation(); addToCart(${product.id})">Add to Cart</button>
                                <button class="buy-btn" onclick="event.stopPropagation(); buyNow(${product.id})">Buy Now</button>
                            </div>
                        </div>
                    </div>
                `;
                grid.innerHTML += card;
            });
        }

        function showCategory(category) {
            filteredProducts = products.filter(p => p.category === category);
            displayProducts(filteredProducts);
            document.getElementById('productsTitle').textContent = category;
            window.scrollTo({ top: document.querySelector('.content-area').offsetTop, behavior: 'smooth' });
        }

        function searchProducts() {
            const query = document.getElementById('searchInput').value.toLowerCase();
            if (query === '') {
                filteredProducts = allProducts;
            } else {
                filteredProducts = allProducts.filter(p => 
                    p.name.toLowerCase().includes(query) || 
                    p.category.toLowerCase().includes(query)
                );
            }
            displayProducts(filteredProducts);
            document.getElementById('productsTitle').textContent = query ? `Search: "${query}"` : 'Featured Products';
        }

        function showProductDetail(productId) {
            const product = products.find(p => p.id === productId);
            const content = `
                <img src="${product.img}" class="product-detail-img" alt="${product.name}">
                <h1 style="margin-bottom: 20px;">${product.name}</h1>
                <p style="font-size: 18px; margin-bottom: 20px;">${product.desc}</p>
                <div class="product-price" style="font-size: 32px; margin-bottom: 30px;">‚Çπ${product.price}</div>
                <div style="display: flex; gap: 15px;">
                    <button class="add-cart-btn" style="flex: 1; padding: 15px; font-size: 18px;" onclick="addToCart(${product.id})">Add to Cart</button>
                    <button class="buy-btn" style="flex: 1; padding: 15px; font-size: 18px;" onclick="buyNow(${product.id})">Buy Now</button>
                </div>
            `;
            document.getElementById('productDetailContent').innerHTML = content;
            showScreen('productDetailScreen');
        }

        function backToHome() {
            showScreen('homeScreen');
        }

        // ==================== CART FUNCTIONS ====================
        function addToCart(productId) {
            const product = products.find(p => p.id === productId);
            const existingItem = cart.find(item => item.id === productId);

            if (existingItem) {
                existingItem.quantity++;
            } else {
                cart.push({ ...product, quantity: 1 });
            }

            saveUserData();
            updateCartBadge();
            alert(`${product.name} added to cart!`);
        }

        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            saveUserData();
            updateCartBadge();
            showCart();
        }

        function updateCartBadge() {
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            document.getElementById('cartBadge').textContent = totalItems;
            if (document.getElementById('cartBadge2')) {
                document.getElementById('cartBadge2').textContent = totalItems;
            }
        }

        function showCart() {
            showScreen('cartScreen');
            const container = document.getElementById('cartContainer');

            if (cart.length === 0) {
                container.innerHTML = '<div class="empty-message">Your cart is empty!</div>';
                return;
            }

            let cartHTML = '';
            let total = 0;

            cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                total += itemTotal;
                cartHTML += `
                    <div class="cart-item">
                        <img src="${item.img}" class="cart-item-img" alt="${item.name}">
                        <div class="cart-item-info">
                            <h3>${item.name}</h3>
                            <p>‚Çπ${item.price} x ${item.quantity}</p>
                            <p style="color: #10b981; font-weight: bold;">‚Çπ${itemTotal}</p>
                        </div>
                        <button class="remove-btn" onclick="removeFromCart(${item.id})">Remove</button>
                    </div>
                `;
            });

            cartHTML += `
                <div class="cart-total">
                    Total: ‚Çπ${total}
                </div>
                <button class="checkout-btn" onclick="proceedToPayment(${total})">Proceed to Payment</button>
            `;

            container.innerHTML = cartHTML;
        }

        function buyNow(productId) {
            cart = [];
            addToCart(productId);
            const product = products.find(p => p.id === productId);
            proceedToPayment(product.price);
        }

        // ==================== PAYMENT & ORDERS ====================
        function proceedToPayment(amount) {
            document.getElementById('paymentAmount').textContent = amount;
            showScreen('paymentScreen');
        }

        function confirmOrder() {
            const orderId = 'ORD' + Date.now();
            const orderData = {
                orderId,
                user: currentUser.name,
                email: currentUser.email,
                items: cart.length,
                total: cart.reduce((sum, item) => sum + (item.price * item.quantity), 0),
                date: new Date().toLocaleString(),
                products: [...cart]
            };

            // Save order
            const orders = JSON.parse(localStorage.getItem('orders') || '[]');
            orders.push(orderData);
            localStorage.setItem('orders', JSON.stringify(orders));

            // Clear cart
            cart = [];
            saveUserData();
            updateCartBadge();

            // Show confirmation
            document.getElementById('orderId').textContent = orderId;
            showScreen('orderConfirmScreen');
        }

        // ==================== PROFILE ====================
        function showProfile() {
            alert(`Profile:\n\nName: ${currentUser.name}\nEmail: ${currentUser.email}\n\nContact us: aryanarvindpandit@gmail.com`);
        }

        // ==================== ADMIN PANEL ====================
        function showAdminPanel() {
            showScreen('adminScreen');
            loadAdminData();
        }

        function loadAdminData() {
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const orders = JSON.parse(localStorage.getItem('orders') || '[]');

            document.getElementById('totalUsers').textContent = users.length;
            document.getElementById('totalOrders').textContent = orders.length;
            
            const totalRevenue = orders.reduce((sum, order) => sum + order.total, 0);
            document.getElementById('totalRevenue').textContent = totalRevenue;

            const tbody = document.getElementById('ordersTableBody');
            tbody.innerHTML = '';

            if (orders.length === 0) {
                tbody.innerHTML = '<tr><td colspan="7" style="text-align:center;">No orders yet</td></tr>';
                return;
            }

            orders.reverse().forEach(order => {
                const row = `
                    <tr>
                        <td>${order.orderId}</td>
                        <td>${order.user}</td>
                        <td>${order.email}</td>
                        <td>${order.items}</td>
                        <td>‚Çπ${order.total}</td>
                        <td>${order.date}</td>
                        <td><button class="block-btn" onclick="cancelOrder('${order.orderId}')">Cancel</button></td>
                    </tr>
                `;
                tbody.innerHTML += row;
            });
        }

        function cancelOrder(orderId) {
            if (confirm('Cancel this order?')) {
                let orders = JSON.parse(localStorage.getItem('orders') || '[]');
                orders = orders.filter(o => o.orderId !== orderId);
                localStorage.setItem('orders', JSON.stringify(orders));
                loadAdminData();
                alert('Order cancelled!');
            }
        }

        function adminLogout() {
            showScreen('loginScreen');
        }

        // ==================== START APP ====================
        init();
    </script>
</body>
</html>
